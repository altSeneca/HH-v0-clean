(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[294],{1855:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>Q});var a=s(5155),i=s(2115),r=s(9776),n=s(2454),l=s(549),o=s(1733),c=s(6132),d=s(2529),x=s(8874),m=s(6983);function u(e){let{data:t}=e,s=[{label:"Pending Review",value:t.totalPending,icon:c.A,color:"yellow",bgColor:"bg-yellow-50",textColor:"text-yellow-700",iconColor:"text-yellow-500",borderColor:"border-yellow-200"},{label:"Approved Today",value:t.approvedToday,icon:d.A,color:"green",bgColor:"bg-green-50",textColor:"text-green-700",iconColor:"text-green-500",borderColor:"border-green-200"},{label:"Rejected Today",value:t.rejectedToday,icon:x.A,color:"red",bgColor:"bg-red-50",textColor:"text-red-700",iconColor:"text-red-500",borderColor:"border-red-200"},{label:"Avg Processing Time",value:"".concat(t.avgProcessingTimeMinutes,"m"),icon:m.A,color:"blue",bgColor:"bg-blue-50",textColor:"text-blue-700",iconColor:"text-blue-500",borderColor:"border-blue-200"}];return(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:s.map((e,t)=>{let s=e.icon;return(0,a.jsx)(o.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"".concat(e.bgColor," ").concat(e.borderColor," border-2 rounded-lg p-4 shadow-sm hover:shadow-md transition-shadow"),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-1",children:e.label}),(0,a.jsx)("p",{className:"text-3xl font-bold ".concat(e.textColor),children:e.value})]}),(0,a.jsx)("div",{className:"".concat(e.iconColor," opacity-80"),children:(0,a.jsx)(s,{size:32,strokeWidth:2})})]})},e.label)})})}var g=s(6497),b=s(5722),h=s(6955),p=s(508),f=s(4662);function y(e){let{certifications:t,selectedId:s,onSelect:r}=e,[n,l]=(0,i.useState)("date"),[c,d]=(0,i.useState)("desc"),[x,m]=(0,i.useState)("all"),[u,y]=(0,i.useState)(""),j=e=>e>=85?{color:"bg-green-500",label:"High",level:"high"}:e>=60?{color:"bg-amber-500",label:"Medium",level:"medium"}:{color:"bg-red-500",label:"Low",level:"low"},v=(0,i.useMemo)(()=>{let e=[...t];if("all"!==x&&(e=e.filter(e=>j(e.ocrConfidence).level===x)),u){let t=u.toLowerCase();e=e.filter(e=>e.holderName.toLowerCase().includes(t)||e.certificationType.toLowerCase().includes(t)||e.certificationNumber.toLowerCase().includes(t))}return e.sort((e,t)=>{let s=0;switch(n){case"date":s=new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime();break;case"type":s=e.certificationType.localeCompare(t.certificationType);break;case"confidence":s=e.ocrConfidence-t.ocrConfidence}return"asc"===c?s:-s}),e},[t,n,c,x,u]),N=e=>{n===e?d("asc"===c?"desc":"asc"):(l(e),d("desc"))};return(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsxs)("div",{className:"p-4 border-b border-gray-200 bg-white",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Verification Queue"}),(0,a.jsx)("input",{type:"text",placeholder:"Search by name, type, or number...",value:u,onChange:e=>y(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 mb-3"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsxs)("button",{onClick:()=>N("date"),className:"flex items-center gap-1 px-3 py-1.5 text-sm rounded ".concat("date"===n?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"," hover:bg-blue-50 transition-colors"),children:["Date","date"===n&&(0,a.jsx)(b.A,{size:14,className:"asc"===c?"rotate-180":""})]}),(0,a.jsxs)("button",{onClick:()=>N("type"),className:"flex items-center gap-1 px-3 py-1.5 text-sm rounded ".concat("type"===n?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"," hover:bg-blue-50 transition-colors"),children:["Type","type"===n&&(0,a.jsx)(b.A,{size:14,className:"asc"===c?"rotate-180":""})]}),(0,a.jsxs)("button",{onClick:()=>N("confidence"),className:"flex items-center gap-1 px-3 py-1.5 text-sm rounded ".concat("confidence"===n?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"," hover:bg-blue-50 transition-colors"),children:["Confidence","confidence"===n&&(0,a.jsx)(b.A,{size:14,className:"asc"===c?"rotate-180":""})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 ml-auto",children:[(0,a.jsx)(h.A,{size:16,className:"text-gray-500"}),(0,a.jsxs)("select",{value:x,onChange:e=>m(e.target.value),className:"text-sm border border-gray-300 rounded px-2 py-1.5 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"all",children:"All Confidence"}),(0,a.jsx)("option",{value:"high",children:"High (85%+)"}),(0,a.jsx)("option",{value:"medium",children:"Medium (60-85%)"}),(0,a.jsx)("option",{value:"low",children:"Low (<60%)"})]})]})]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 mt-3",children:[v.length," of ",t.length," certifications"]})]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,a.jsx)(g.N,{initial:!1,children:0===v.length?(0,a.jsxs)(o.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex flex-col items-center justify-center h-full p-8 text-center",children:[(0,a.jsx)(h.A,{size:48,className:"text-gray-300 mb-4"}),(0,a.jsx)("p",{className:"text-gray-600 font-medium",children:"No certifications match your filters"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm mt-2",children:"Try adjusting your search or filters"})]}):(0,a.jsx)("div",{className:"divide-y divide-gray-200",children:v.map((e,t)=>{let i=j(e.ocrConfidence),n=e.id===s;return(0,a.jsxs)(o.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{delay:.02*t},onClick:()=>r(e),className:"p-4 cursor-pointer transition-colors ".concat(n?"bg-blue-50 border-l-4 border-blue-500":"bg-white hover:bg-gray-50 border-l-4 border-transparent"),children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(p.A,{size:18,className:"text-gray-500"}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:e.holderName})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium ".concat(i.color," bg-opacity-10"),children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(i.color)}),i.label," ",Math.round(e.ocrConfidence),"%"]})]}),(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-1",children:e.certificationType}),(0,a.jsx)("p",{className:"text-xs font-mono text-gray-500 mb-2",children:e.certificationNumber}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["Uploaded ",(0,f.GP)(new Date(e.createdAt),"MMM d, yyyy h:mm a")]})]},e.id)})})})})]})}var j=s(4417),v=s(1629),N=s(4904),w=s(5993),C=s(3141),k=s(7354);function P(e){let{documentUrl:t,documentType:s="image"}=e,[r,n]=(0,i.useState)(!1),[l,c]=(0,i.useState)(0),[d,x]=(0,i.useState)(!1),m=()=>{var e,t,s,a;r?null==(s=(a=document).exitFullscreen)||s.call(a):null==(e=(t=document.documentElement).requestFullscreen)||e.call(t),n(!r)},u=()=>{c(e=>(e+90)%360)};return(0,a.jsxs)("div",{className:"flex flex-col h-full ".concat(r?"fixed inset-0 z-50 bg-black":"bg-gray-100"),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 ".concat(r?"bg-gray-900":"bg-white"," border-b border-gray-300"),children:[(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)("h3",{className:"font-semibold ".concat(r?"text-white":"text-gray-900"),children:"Document Viewer"})}),(0,a.jsx)(j.GT,{children:e=>{let{zoomIn:t,zoomOut:s,resetTransform:i}=e;return(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>s(),className:"p-2 rounded hover:bg-gray-200 ".concat(r?"text-white hover:bg-gray-700":"text-gray-700"),title:"Zoom Out",children:(0,a.jsx)(v.A,{size:20})}),(0,a.jsx)("button",{onClick:()=>t(),className:"p-2 rounded hover:bg-gray-200 ".concat(r?"text-white hover:bg-gray-700":"text-gray-700"),title:"Zoom In",children:(0,a.jsx)(N.A,{size:20})}),(0,a.jsx)("button",{onClick:()=>i(),className:"p-2 rounded hover:bg-gray-200 ".concat(r?"text-white hover:bg-gray-700":"text-gray-700"),title:"Reset",children:(0,a.jsx)(w.A,{size:20})}),(0,a.jsx)("button",{onClick:u,className:"p-2 rounded hover:bg-gray-200 ".concat(r?"text-white hover:bg-gray-700":"text-gray-700"),title:"Rotate",children:(0,a.jsx)(C.A,{size:20})}),(0,a.jsx)("div",{className:"w-px h-6 ".concat(r?"bg-gray-700":"bg-gray-300")}),(0,a.jsx)("button",{onClick:m,className:"p-2 rounded hover:bg-gray-200 ".concat(r?"text-white hover:bg-gray-700":"text-gray-700"),title:r?"Exit Fullscreen":"Fullscreen",children:(0,a.jsx)(k.A,{size:20})})]})}})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-hidden relative",children:[(0,a.jsx)(j.GT,{initialScale:1,minScale:.5,maxScale:5,centerOnInit:!0,wheel:{step:.1},doubleClick:{mode:"reset"},children:e=>{let{zoomIn:i,zoomOut:r,resetTransform:n,...c}=e;return(0,a.jsx)(j.WZ,{wrapperClass:"w-full h-full",contentClass:"w-full h-full flex items-center justify-center",children:(0,a.jsxs)("div",{className:"relative",children:[!d&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100",children:(0,a.jsx)("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}),"image"===s?(0,a.jsx)(o.P.img,{src:t,alt:"Certification Document",className:"max-w-full max-h-full object-contain",style:{transform:"rotate(".concat(l,"deg)")},onLoad:()=>x(!0),initial:{opacity:0},animate:{opacity:+!!d},transition:{duration:.3}}):(0,a.jsx)("iframe",{src:t,className:"w-full h-full min-h-[600px]",title:"PDF Document",onLoad:()=>x(!0)})]})})}}),!r&&(0,a.jsx)(o.P.div,{initial:{opacity:0},animate:{opacity:.8*!!d},transition:{delay:1,duration:.5},className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-gray-900 text-white text-xs px-3 py-2 rounded shadow-lg pointer-events-none",children:"Scroll to zoom • Drag to pan • Double-click to reset"})]})]})}var A=s(2056),S=s(5229),T=s(4897);let z=["Expired certification","Document quality too poor to verify","Information does not match records","Wrong certification type","Document appears altered or fake","Missing required information","Name mismatch"];function D(e){let{isOpen:t,onClose:s,onConfirm:r,workerName:n,isSubmitting:l=!1}=e,[c,d]=(0,i.useState)(""),[x,m]=(0,i.useState)(null),u=(0,i.useRef)(null);(0,i.useEffect)(()=>{t&&u.current&&u.current.focus()},[t]),(0,i.useEffect)(()=>{let e=e=>{"Escape"===e.key&&t&&!l&&s()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[t,l,s]);let b=()=>{l||(d(""),m(null),s())};return(0,i.useEffect)(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),(0,a.jsx)(g.N,{children:t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:b,className:"fixed inset-0 bg-black bg-opacity-50 z-50"}),(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 pointer-events-none",children:(0,a.jsxs)(o.P.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",duration:.3},className:"bg-white rounded-lg shadow-2xl w-full max-w-lg pointer-events-auto",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-red-100 rounded-lg",children:(0,a.jsx)(A.A,{className:"text-red-600",size:24})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Reject Certification"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["For: ",n]})]})]}),(0,a.jsx)("button",{onClick:b,disabled:l,className:"text-gray-400 hover:text-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Close",children:(0,a.jsx)(S.A,{size:24})})]}),(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Common Reasons (click to select)"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:z.map(e=>(0,a.jsx)("button",{onClick:()=>{x===e?(m(null),d("")):(m(e),d(e))},disabled:l,className:"px-3 py-1.5 text-sm rounded-full border-2 transition-all ".concat(x===e?"bg-red-50 border-red-500 text-red-700 font-medium":"bg-white border-gray-300 text-gray-700 hover:border-red-300 hover:bg-red-50"," disabled:opacity-50 disabled:cursor-not-allowed"),children:e},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"rejection-reason",className:"block text-sm font-medium text-gray-700 mb-2",children:"Rejection Reason"}),(0,a.jsx)("textarea",{ref:u,id:"rejection-reason",value:c,onChange:e=>{d(e.target.value),m(null)},disabled:l,placeholder:"Provide a detailed reason for rejection...",rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 disabled:bg-gray-100 disabled:cursor-not-allowed resize-none"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"This reason will be shared with the worker."})]}),(0,a.jsx)("div",{className:"bg-red-50 border-l-4 border-red-500 p-3 rounded",children:(0,a.jsxs)("p",{className:"text-sm text-red-700",children:[(0,a.jsx)("strong",{children:"Note:"})," The worker will be notified of this rejection and will need to resubmit their certification."]})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-200 bg-gray-50",children:[(0,a.jsx)(T.$,{variant:"outline",onClick:b,disabled:l,className:"min-w-24",children:"Cancel"}),(0,a.jsx)(T.$,{variant:"destructive",onClick:()=>{c.trim()&&r(c.trim())},disabled:l||!c.trim(),className:"min-w-24",children:l?(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Rejecting..."]}):"Confirm Rejection"})]})]})})]})})}var E=s(9015),R=s(6482),M=s(5880),L=s(2332),F=s(368),I=s(7937);function Q(){let[e,t]=(0,i.useState)(null),[s,c]=(0,i.useState)(!1),[m,g]=(0,i.useState)(!1),b=(0,r.jE)(),{data:h,isLoading:p}=(0,n.I)({queryKey:["certifications","pending"],queryFn:()=>E.G.getPendingQueue({status:"pending"}),refetchInterval:3e4}),j=(null==h?void 0:h.certifications)||[],v=j.find(t=>t.id===e);(0,i.useEffect)(()=>{j.length>0&&!e&&t(j[0].id)},[j,e]);let N=(0,i.useMemo)(()=>{let e=(null==h?void 0:h.pending)||0,t=(null==h?void 0:h.approved)||0;return{totalPending:e,approvedToday:t,rejectedToday:(null==h?void 0:h.rejected)||0,avgProcessingTimeMinutes:5}},[h]),w=(0,l.n)({mutationFn:e=>E.G.approve({certificationId:e,verifiedBy:"current-admin"}),onMutate:async e=>{await b.cancelQueries({queryKey:["certifications","pending"]});let t=b.getQueryData(["certifications","pending"]);return b.setQueryData(["certifications","pending"],t=>t?{...t,certifications:t.certifications.filter(t=>t.id!==e),pending:t.pending-1,approved:t.approved+1}:t),{previousData:t}},onError:(e,t,s)=>{(null==s?void 0:s.previousData)&&b.setQueryData(["certifications","pending"],s.previousData),console.error("Failed to approve certification:",e)},onSuccess:()=>{A()}}),C=(0,l.n)({mutationFn:e=>{let{certId:t,reason:s}=e;return E.G.reject({certificationId:t,reason:s,verifiedBy:"current-admin"})},onMutate:async e=>{let{certId:t}=e;await b.cancelQueries({queryKey:["certifications","pending"]});let s=b.getQueryData(["certifications","pending"]);return b.setQueryData(["certifications","pending"],e=>e?{...e,certifications:e.certifications.filter(e=>e.id!==t),pending:e.pending-1,rejected:e.rejected+1}:e),{previousData:s}},onError:(e,t,s)=>{(null==s?void 0:s.previousData)&&b.setQueryData(["certifications","pending"],s.previousData),console.error("Failed to reject certification:",e)},onSuccess:()=>{c(!1),A()}}),k=()=>j.findIndex(t=>t.id===e),A=()=>{let e=k();e<j.length-1?t(j[e+1].id):j.length>0&&t(j[0].id)},S=()=>{let e=k();e>0?t(j[e-1].id):j.length>0&&t(j[j.length-1].id)},z=()=>{e&&!w.isPending&&w.mutate(e)},Q=()=>{e&&!C.isPending&&c(!0)},O=()=>{A()},{isEnabled:q}=function(e){let{onApprove:t,onReject:s,onSkip:a,onNext:r,onPrevious:n,disabled:l=!1,modalOpen:o=!1}=e,c=(0,i.useCallback)(e=>{if(l||o||e.ctrlKey||e.metaKey||e.altKey||e.shiftKey)return;let i=e.target;if(!("INPUT"===i.tagName||"TEXTAREA"===i.tagName||i.isContentEditable))switch(e.key.toLowerCase()){case"a":e.preventDefault(),t();break;case"r":e.preventDefault(),s();break;case"s":e.preventDefault(),a();break;case"arrowright":e.preventDefault(),r();break;case"arrowleft":e.preventDefault(),n()}},[t,s,a,r,n,l,o]);return(0,i.useEffect)(()=>(window.addEventListener("keydown",c),()=>{window.removeEventListener("keydown",c)}),[c]),{shortcuts:{approve:"A",reject:"R",skip:"S",next:"→",previous:"←"},isEnabled:!l&&!o}}({onApprove:z,onReject:Q,onSkip:O,onNext:A,onPrevious:S,disabled:w.isPending||C.isPending,modalOpen:s});return p?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading verification queue..."})]})}):0===j.length?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Certification Verification"}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"Review and approve worker certifications"})]}),(0,a.jsx)(u,{data:N}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[(0,a.jsx)(d.A,{size:64,className:"text-green-500 mx-auto mb-4"}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"All caught up!"}),(0,a.jsx)("p",{className:"text-gray-600",children:"There are no pending certifications to review."})]})]})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("div",{className:"bg-white border-b border-gray-200 p-6",children:(0,a.jsx)("div",{className:"max-w-[1800px] mx-auto",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Certification Verification"}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"Review and approve worker certifications"})]}),(0,a.jsxs)("button",{onClick:()=>g(!m),className:"flex items-center gap-2 px-4 py-2 text-sm bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:[(0,a.jsx)(R.A,{size:18}),"Keyboard Shortcuts"]})]})})}),(0,a.jsxs)("div",{className:"max-w-[1800px] mx-auto p-6",children:[(0,a.jsx)(u,{data:N}),m&&(0,a.jsxs)(o.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[(0,a.jsx)("h3",{className:"font-semibold text-blue-900 mb-3",children:"Keyboard Shortcuts"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("kbd",{className:"px-2 py-1 bg-white border border-blue-300 rounded font-mono text-blue-700",children:"A"}),(0,a.jsx)("span",{className:"text-blue-800",children:"Approve"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("kbd",{className:"px-2 py-1 bg-white border border-blue-300 rounded font-mono text-blue-700",children:"R"}),(0,a.jsx)("span",{className:"text-blue-800",children:"Reject"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("kbd",{className:"px-2 py-1 bg-white border border-blue-300 rounded font-mono text-blue-700",children:"S"}),(0,a.jsx)("span",{className:"text-blue-800",children:"Skip"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("kbd",{className:"px-2 py-1 bg-white border border-blue-300 rounded font-mono text-blue-700",children:"←"}),(0,a.jsx)("span",{className:"text-blue-800",children:"Previous"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("kbd",{className:"px-2 py-1 bg-white border border-blue-300 rounded font-mono text-blue-700",children:"→"}),(0,a.jsx)("span",{className:"text-blue-800",children:"Next"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-6 h-[calc(100vh-400px)]",children:[(0,a.jsx)("div",{className:"lg:col-span-2 bg-white rounded-lg shadow-sm overflow-hidden",children:(0,a.jsx)(y,{certifications:j,selectedId:e,onSelect:e=>t(e.id)})}),(0,a.jsxs)("div",{className:"lg:col-span-3 space-y-4",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden h-[calc(100%-200px)]",children:v?(0,a.jsx)(P,{documentUrl:v.documentUrl}):(0,a.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:"Select a certification to view"})}),v&&(0,a.jsxs)(o.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow-sm p-6",children:[(0,a.jsxs)("div",{className:"mb-6 pb-6 border-b border-gray-200",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:v.holderName}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Certification Type:"}),(0,a.jsx)("p",{className:"font-semibold text-gray-900 mt-1",children:v.certificationType})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Certification Number:"}),(0,a.jsx)("p",{className:"font-semibold font-mono text-gray-900 mt-1",children:v.certificationNumber})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Expiration Date:"}),(0,a.jsx)("p",{className:"font-semibold text-gray-900 mt-1",children:(0,f.GP)(new Date(v.expirationDate),"MMM d, yyyy")})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Uploaded:"}),(0,a.jsx)("p",{className:"font-semibold text-gray-900 mt-1",children:(0,f.GP)(new Date(v.createdAt),"MMM d, yyyy h:mm a")})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"OCR Confidence:"}),(0,a.jsxs)("p",{className:"font-semibold text-gray-900 mt-1",children:[Math.round(v.ocrConfidence),"%"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Submitted Via:"}),(0,a.jsx)("p",{className:"font-semibold text-gray-900 mt-1 capitalize",children:v.submittedVia})]})]}),v.certificationType.toLowerCase().includes("sst")&&(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[(0,a.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 mb-3",children:(0,a.jsxs)("p",{className:"text-sm text-amber-800",children:[(0,a.jsx)("strong",{children:"NYC SST Verification:"})," Manually verify this card on the official NYC DOB portal before approving."]})}),(0,a.jsxs)("a",{href:"https://dob-trainingconnect.cityofnewyork.us/",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:[(0,a.jsx)(M.A,{className:"w-4 h-4"}),"Verify SST on NYC DOB Portal"]}),v.certificationNumber&&(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-2 text-center",children:["SST Number: ",(0,a.jsx)("span",{className:"font-mono font-semibold",children:v.certificationNumber})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[(0,a.jsxs)(T.$,{onClick:z,disabled:w.isPending||C.isPending,className:"bg-green-600 hover:bg-green-700 text-white",size:"lg",children:[(0,a.jsx)(d.A,{size:18,className:"mr-2"}),"Approve (A)"]}),(0,a.jsxs)(T.$,{onClick:Q,disabled:w.isPending||C.isPending,variant:"destructive",size:"lg",children:[(0,a.jsx)(x.A,{size:18,className:"mr-2"}),"Reject (R)"]}),(0,a.jsxs)(T.$,{onClick:O,disabled:w.isPending||C.isPending,variant:"outline",size:"lg",children:[(0,a.jsx)(L.A,{size:18,className:"mr-2"}),"Skip (S)"]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(T.$,{onClick:S,disabled:w.isPending||C.isPending,variant:"outline",size:"lg",className:"flex-1",children:(0,a.jsx)(F.A,{size:18})}),(0,a.jsx)(T.$,{onClick:A,disabled:w.isPending||C.isPending,variant:"outline",size:"lg",className:"flex-1",children:(0,a.jsx)(I.A,{size:18})})]})]}),(0,a.jsxs)("div",{className:"mt-4 text-center text-sm text-gray-600",children:[k()+1," of ",j.length]})]})]})]})]}),(0,a.jsx)(D,{isOpen:s,onClose:()=>c(!1),onConfirm:t=>{e&&C.mutate({certId:e,reason:t})},workerName:(null==v?void 0:v.holderName)||"",isSubmitting:C.isPending})]})}},4897:(e,t,s)=>{"use strict";s.d(t,{$:()=>l});var a=s(5155),i=s(2115),r=s(2821),n=s(5889);let l=i.forwardRef((e,t)=>{let{className:s,variant:i="default",size:l="default",...o}=e;return(0,a.jsx)("button",{className:function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,n.QP)((0,r.$)(t))}("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{"bg-blue-600 text-white hover:bg-blue-700":"default"===i,"border border-gray-300 bg-white text-gray-900 hover:bg-gray-100":"outline"===i,"hover:bg-gray-100 text-gray-900":"ghost"===i,"bg-red-600 text-white hover:bg-red-700":"destructive"===i,"h-10 px-4 py-2":"default"===l,"h-9 px-3 text-xs":"sm"===l,"h-12 px-8":"lg"===l,"h-10 w-10":"icon"===l},s),ref:t,...o})});l.displayName="Button"},5922:(e,t,s)=>{Promise.resolve().then(s.bind(s,1855))},9015:(e,t,s)=>{"use strict";s.d(t,{G:()=>i});let a=s(5125).A.create({baseURL:"http://localhost:8080",timeout:3e4,headers:{"Content-Type":"application/json"}});a.interceptors.request.use(e=>{let t=sessionStorage.getItem("authToken");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),a.interceptors.response.use(e=>e,e=>{var t;return(null==(t=e.response)?void 0:t.status)===401&&(window.location.href="/login"),Promise.reject(e)});let i={getPresignedUrl:async e=>(await a.post("/api/storage/presigned-url",e)).data,uploadToS3:async(e,t,s)=>{await a.put(e,t,{headers:{"Content-Type":t.type},onUploadProgress:e=>{s&&e.total&&s(Math.round(100*e.loaded/e.total))}})},extractOCR:async e=>(await a.post("/api/ocr/extract-certification",e)).data,submitCertification:async e=>(await a.post("/api/certifications",e)).data,getPendingQueue:async e=>(await a.get("/api/certifications/pending",{params:e})).data,approve:async e=>{let{certificationId:t,...s}=e;return(await a.post("/api/certifications/".concat(t,"/approve"),s)).data},reject:async e=>{let{certificationId:t,...s}=e;return(await a.post("/api/certifications/".concat(t,"/reject"),s)).data},getCertification:async e=>(await a.get("/api/certifications/".concat(e))).data}}},e=>{e.O(0,[612,141,315,441,255,358],()=>e(e.s=5922)),_N_E=e.O()}]);