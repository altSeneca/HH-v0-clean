(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[241],{2740:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>n});var s=a(5155),t=a(2115),o=a(6181);function n(){let[e,r]=(0,t.useState)(""),[a,n]=(0,t.useState)(!1),[l,d]=(0,t.useState)(""),[i,c]=(0,t.useState)((0,o.yL)()),[h,m]=(0,t.useState)(!1);(0,t.useEffect)(()=>{m(!0)},[]);let u=async()=>{n(!0),d("");try{let e=await (0,o.Ck)(i,{width:512,errorCorrectionLevel:"M"});r(e)}catch(e){d(e instanceof Error?e.message:"Failed to generate QR code")}finally{n(!1)}};return h?(0,s.jsx)("main",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-gray-100 py-8",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto px-4",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"QR Code Generator (Test)"}),(0,s.jsx)("a",{href:"/upload/scan",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg shadow transition-colors",children:"Test Scanner"})]}),(0,s.jsx)("p",{className:"text-gray-600",children:"Generate test QR codes for development and testing. Scan with the upload page to verify functionality."})]}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-8",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Worker Session Data"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Worker ID *"}),(0,s.jsx)("input",{type:"text",value:i.workerId,onChange:e=>c({...i,workerId:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"worker-001"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project ID *"}),(0,s.jsx)("input",{type:"text",value:i.projectId,onChange:e=>c({...i,projectId:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"project-001"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company ID *"}),(0,s.jsx)("input",{type:"text",value:i.companyId,onChange:e=>c({...i,companyId:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"company-001"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Worker Name (Optional)"}),(0,s.jsx)("input",{type:"text",value:i.workerName||"",onChange:e=>c({...i,workerName:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"John Doe"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Upload Session ID *"}),(0,s.jsx)("input",{type:"text",value:i.uploadSessionId,onChange:e=>c({...i,uploadSessionId:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"session-123456"})]}),l&&(0,s.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,s.jsx)("p",{className:"text-sm text-red-600",children:l})}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("button",{onClick:u,disabled:a,className:"flex-1 px-4 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-semibold rounded-lg shadow transition-colors",children:a?"Generating...":"Generate QR Code"}),(0,s.jsx)("button",{onClick:()=>{c((0,o.yL)({uploadSessionId:"session-".concat(Date.now())})),r("")},className:"px-4 py-3 bg-gray-600 hover:bg-gray-700 text-white font-semibold rounded-lg shadow transition-colors",children:"Randomize"})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Generated QR Code"}),e?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg border-2 border-gray-200",children:(0,s.jsx)("img",{src:e,alt:"Generated QR Code",className:"w-full max-w-sm mx-auto"})}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("button",{onClick:()=>{if(!e)return;let r=document.createElement("a");r.href=e,r.download="hazardhawk-qr-".concat(i.uploadSessionId,".png"),r.click()},className:"w-full px-4 py-3 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-lg shadow transition-colors",children:"Download QR Code"}),(0,s.jsx)("a",{href:"/upload/scan",target:"_blank",rel:"noopener noreferrer",className:"block text-center px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg shadow transition-colors",children:"Test with Scanner"})]}),(0,s.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[(0,s.jsx)("h3",{className:"font-semibold text-sm text-gray-700 mb-2",children:"Encoded Data:"}),(0,s.jsx)("pre",{className:"text-xs text-gray-600 overflow-x-auto",children:JSON.stringify(i,null,2)})]})]}):(0,s.jsx)("div",{className:"flex items-center justify-center h-64 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("svg",{className:"w-16 h-16 mx-auto mb-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),(0,s.jsx)("p",{className:"text-gray-500",children:'Fill in the form and click "Generate QR Code"'})]})})]})]}),(0,s.jsxs)("div",{className:"mt-8 bg-yellow-50 border-2 border-yellow-200 rounded-lg p-6",children:[(0,s.jsx)("h3",{className:"font-semibold text-yellow-900 mb-3",children:"Testing Instructions:"}),(0,s.jsxs)("ol",{className:"list-decimal list-inside space-y-2 text-sm text-yellow-800",children:[(0,s.jsx)("li",{children:"Fill in the worker session data above (or use default test values)"}),(0,s.jsx)("li",{children:'Click "Generate QR Code" to create a QR code'}),(0,s.jsx)("li",{children:"Download the QR code or open the scanner in a new tab"}),(0,s.jsx)("li",{children:"Scan the QR code with your phone or display it on another screen to test"}),(0,s.jsx)("li",{children:"Verify that the scanner correctly extracts all the data"})]})]})]})}):(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-gray-300 border-t-blue-600"})})}},6181:(e,r,a)=>{"use strict";a.d(r,{Ck:()=>l,oA:()=>n,yL:()=>d});var s=a(2769),t=a(7381);let o=t.Ikc({workerId:t.YjP().min(1,"Worker ID is required"),projectId:t.YjP().min(1,"Project ID is required"),companyId:t.YjP().min(1,"Company ID is required"),workerName:t.YjP().optional(),uploadSessionId:t.YjP().min(1,"Upload session ID is required")});function n(e){try{let r=JSON.parse(e);return o.parse(r)}catch(e){if(e instanceof t.GaX){let r=e.issues.map(e=>"".concat(e.path.join("."),": ").concat(e.message));throw Error("Invalid QR code data: ".concat(r.join(", ")))}if(e instanceof SyntaxError)throw Error("Invalid QR code format: not valid JSON");throw Error("Failed to parse QR code data")}}async function l(e,r){try{let a=o.parse(e),t=JSON.stringify(a);return await s.toDataURL(t,{width:(null==r?void 0:r.width)||512,margin:(null==r?void 0:r.margin)||2,errorCorrectionLevel:(null==r?void 0:r.errorCorrectionLevel)||"M",color:{dark:"#000000",light:"#FFFFFF"}})}catch(e){if(e instanceof t.GaX){let r=e.issues.map(e=>"".concat(e.path.join("."),": ").concat(e.message));throw Error("Invalid worker data: ".concat(r.join(", ")))}throw Error("Failed to generate QR code")}}function d(e){return{workerId:"test-worker-001",projectId:"test-project-001",companyId:"test-company-001",workerName:"John Doe",uploadSessionId:"session-".concat(Date.now()),...e}}},7065:(e,r,a)=>{Promise.resolve().then(a.bind(a,2740))}},e=>{e.O(0,[490,441,255,358],()=>e(e.s=7065)),_N_E=e.O()}]);