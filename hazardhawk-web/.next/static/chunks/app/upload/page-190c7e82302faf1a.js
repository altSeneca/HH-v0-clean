(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[994],{3640:(e,t,a)=>{Promise.resolve().then(a.bind(a,3723))},3723:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>A});var s=a(5155),l=a(2115),r=a(63),i=a(5664),n=a(1786),c=a(6132),o=a(1362),d=a(5959);let m={type:"idle"},x=(0,d.v)(e=>({state:m,currentFile:null,workerId:null,projectId:null,setState:t=>e({state:t}),setFile:t=>e({currentFile:t}),setWorkerInfo:(t,a)=>e({workerId:t,projectId:a}),reset:()=>e({state:m,currentFile:null,workerId:null,projectId:null})}));var u=a(9015),h=a(1963),g=a(4897),f=a(5774),p=a.n(f),b=a(5229),j=a(8314);function y(e){let{onCapture:t,onCancel:a}=e,[r,n]=(0,l.useState)(null),[c,o]=(0,l.useState)("environment"),[d,m]=(0,l.useState)(null),x=(0,l.useRef)(null),u=(0,l.useCallback)(e=>{console.error("Camera access error:",e),n(!1)},[]),h=(0,l.useCallback)(()=>{n(!0)},[]),f=(0,l.useCallback)(()=>{var e;let t=null==(e=x.current)?void 0:e.getScreenshot();t&&m(t)},[]),y=(0,l.useCallback)(()=>{m(null)},[]),N=(0,l.useCallback)(async()=>{if(!d)return;let e=await fetch(d),a=await e.blob(),s=Date.now(),l=new File([a],"certification-".concat(s,".jpg"),{type:"image/jpeg",lastModified:s});t({file:l,preview:d,type:"image",size:l.size,name:l.name})},[d,t]),w=(0,l.useCallback)(()=>{o(e=>"user"===e?"environment":"user")},[]);return!1===r?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[400px] px-4 text-center",children:[(0,s.jsx)(i.A,{className:"w-16 h-16 text-gray-400 mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Camera Permission Required"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-6",children:"Please allow camera access to capture your certification document."}),(0,s.jsx)(g.$,{onClick:a,variant:"outline",children:"Go Back"})]}):(0,s.jsxs)("div",{className:"flex flex-col h-full",children:[(0,s.jsxs)("div",{className:"relative flex-1 bg-black",children:[d?(0,s.jsx)("img",{src:d,alt:"Captured",className:"w-full h-full object-contain"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p(),{ref:x,audio:!1,screenshotFormat:"image/jpeg",videoConstraints:{facingMode:c,width:{ideal:1920},height:{ideal:1080}},onUserMedia:h,onUserMediaError:u,className:"w-full h-full object-cover"}),(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:(0,s.jsxs)("div",{className:"relative w-[90%] max-w-[500px] aspect-[1.586/1]",children:[(0,s.jsx)("div",{className:"absolute inset-0 border-4 border-white rounded-lg shadow-lg"}),(0,s.jsx)("div",{className:"absolute top-0 left-0 w-8 h-8 border-t-4 border-l-4 border-yellow-400 rounded-tl-lg"}),(0,s.jsx)("div",{className:"absolute top-0 right-0 w-8 h-8 border-t-4 border-r-4 border-yellow-400 rounded-tr-lg"}),(0,s.jsx)("div",{className:"absolute bottom-0 left-0 w-8 h-8 border-b-4 border-l-4 border-yellow-400 rounded-bl-lg"}),(0,s.jsx)("div",{className:"absolute bottom-0 right-0 w-8 h-8 border-b-4 border-r-4 border-yellow-400 rounded-br-lg"}),(0,s.jsx)("div",{className:"absolute -bottom-12 left-0 right-0 text-center",children:(0,s.jsx)("p",{className:"text-white text-sm font-medium bg-black/50 px-4 py-2 rounded-lg",children:"Align certification document within frame"})})]})})]}),(0,s.jsxs)("div",{className:"absolute top-0 left-0 right-0 p-4 flex justify-between items-center",children:[(0,s.jsx)(g.$,{onClick:a,variant:"ghost",size:"icon",className:"bg-black/50 hover:bg-black/70 text-white",children:(0,s.jsx)(b.A,{className:"h-6 w-6"})}),!d&&(0,s.jsx)(g.$,{onClick:w,variant:"ghost",size:"icon",className:"bg-black/50 hover:bg-black/70 text-white",children:(0,s.jsx)(j.A,{className:"h-6 w-6"})})]})]}),(0,s.jsx)("div",{className:"bg-white border-t border-gray-200 p-6",children:d?(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsxs)(g.$,{onClick:y,variant:"outline",size:"lg",className:"flex-1 h-20 text-lg",children:[(0,s.jsx)(j.A,{className:"w-5 h-5 mr-2"}),"Retake"]}),(0,s.jsx)(g.$,{onClick:N,size:"lg",className:"flex-1 h-20 text-lg bg-green-600 hover:bg-green-700",children:"Use Photo"})]}):(0,s.jsxs)(g.$,{onClick:f,size:"lg",className:"w-full h-20 text-lg bg-yellow-500 hover:bg-yellow-600 text-black font-semibold",children:[(0,s.jsx)(i.A,{className:"w-6 h-6 mr-2"}),"Capture Document"]})})]})}var N=a(4054),w=a(9715),v=a(3061);let k={"image/jpeg":[".jpg",".jpeg"],"image/png":[".png"],"application/pdf":[".pdf"]};function C(e){var t;let{onFileSelect:a,onCancel:r}=e,[i,o]=(0,l.useState)(null),[d,m]=(0,l.useState)(null),x=(0,l.useCallback)(e=>e.size>0xa00000?"File size must be less than ".concat(10,"MB"):Object.keys(k).some(t=>e.type.startsWith(t.split("/")[0]))?null:"Please upload an image (JPEG, PNG) or PDF file",[]),u=(0,l.useCallback)(e=>{let t=e.type.startsWith("image/")?"image":"pdf",a="image"===t?URL.createObjectURL(e):void 0;return{file:e,preview:a,type:t,size:e.size,name:e.name}},[]),h=(0,l.useCallback)((e,t)=>{if(m(null),t.length>0){var a,s;let e=t[0];(null==(a=e.errors[0])?void 0:a.code)==="file-too-large"?m("File is too large. Maximum size is ".concat(10,"MB")):(null==(s=e.errors[0])?void 0:s.code)==="file-invalid-type"?m("Invalid file type. Please upload an image (JPEG, PNG) or PDF"):m("Failed to upload file. Please try again.");return}if(0===e.length)return void m("No file selected");let l=e[0],r=x(l);if(r)return void m(r);o(u(l))},[x,u]),{getRootProps:f,getInputProps:p,isDragActive:j}=(0,N.VB)({onDrop:h,accept:k,maxSize:0xa00000,multiple:!1}),y=(0,l.useCallback)(()=>{(null==i?void 0:i.preview)&&URL.revokeObjectURL(i.preview),o(null),m(null)},[i]),C=(0,l.useCallback)(()=>{i&&a(i)},[i,a]);return(0,s.jsxs)("div",{className:"flex flex-col h-full p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Upload Document"}),(0,s.jsx)(g.$,{onClick:r,variant:"ghost",size:"icon",children:(0,s.jsx)(b.A,{className:"h-6 w-6"})})]}),i?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center",children:["image"===i.type&&i.preview?(0,s.jsx)("div",{className:"w-full max-w-md",children:(0,s.jsx)("img",{src:i.preview,alt:"Preview",className:"w-full h-auto rounded-lg shadow-lg border border-gray-200"})}):(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center p-8 bg-gray-100 rounded-lg",children:[(0,s.jsx)(w.A,{className:"w-20 h-20 text-red-600 mb-4"}),(0,s.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:"PDF Document"})]}),(0,s.jsx)("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg w-full max-w-md",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:["image"===i.type?(0,s.jsx)(v.A,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}):(0,s.jsx)(w.A,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:i.name}),(0,s.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:(t=i.size)<1024?"".concat(t," B"):t<1048576?"".concat((t/1024).toFixed(1)," KB"):"".concat((t/1048576).toFixed(1)," MB")})]}),(0,s.jsx)(g.$,{onClick:y,variant:"ghost",size:"icon",className:"flex-shrink-0",children:(0,s.jsx)(b.A,{className:"h-4 w-4"})})]})})]}),(0,s.jsxs)("div",{className:"mt-6 flex gap-3",children:[(0,s.jsx)(g.$,{onClick:y,variant:"outline",size:"lg",className:"flex-1 h-16 text-lg",children:"Choose Different File"}),(0,s.jsx)(g.$,{onClick:C,size:"lg",className:"flex-1 h-16 text-lg bg-green-600 hover:bg-green-700",children:"Continue"})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{...f(),className:"\n              flex-1 flex flex-col items-center justify-center\n              border-2 border-dashed rounded-lg p-8\n              transition-colors cursor-pointer\n              ".concat(j?"border-yellow-500 bg-yellow-50":"border-gray-300 hover:border-gray-400 bg-gray-50","\n              ").concat(d?"border-red-500 bg-red-50":"","\n            "),children:[(0,s.jsx)("input",{...p()}),(0,s.jsx)(n.A,{className:"w-16 h-16 mb-4 ".concat(j?"text-yellow-500":"text-gray-400")}),(0,s.jsx)("p",{className:"text-lg font-semibold text-gray-900 mb-2 text-center",children:j?"Drop file here":"Drag and drop your file here"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-6 text-center",children:"or tap to browse files"}),(0,s.jsxs)("div",{className:"text-xs text-gray-500 text-center space-y-1",children:[(0,s.jsx)("p",{children:"Accepted formats: JPEG, PNG, PDF"}),(0,s.jsx)("p",{children:"Maximum file size: 10MB"})]})]}),d&&(0,s.jsxs)("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3",children:[(0,s.jsx)(c.A,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),(0,s.jsx)("p",{className:"text-sm text-red-800",children:d})]})]})]})}var D=a(5299);function P(e){let{fileName:t,fileSize:a,progress:l,onCancel:r,showCancel:i=!0}=e;return(0,s.jsxs)("div",{className:"w-full max-w-md mx-auto p-6 bg-white rounded-lg shadow-lg border border-gray-200",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex-1 min-w-0 pr-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:l<20?"Preparing...":l<30?"Getting upload URL...":l<100?"Uploading...":"Complete!"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 truncate",children:t}),a&&(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:a<1024?"".concat(a," B"):a<1048576?"".concat((a/1024).toFixed(1)," KB"):"".concat((a/1048576).toFixed(1)," MB")})]}),i&&r&&l<100&&(0,s.jsx)(g.$,{onClick:r,variant:"ghost",size:"icon",className:"flex-shrink-0",children:(0,s.jsx)(b.A,{className:"h-5 w-5"})})]}),(0,s.jsx)("div",{className:"mb-3",children:(0,s.jsx)("div",{className:"relative w-full h-3 bg-gray-200 rounded-full overflow-hidden",children:(0,s.jsx)("div",{className:"absolute top-0 left-0 h-full bg-gradient-to-r from-yellow-400 to-yellow-500 transition-all duration-300 ease-out",style:{width:"".concat(l,"%")},children:l<100&&(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent animate-shimmer"})})})}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"flex items-center gap-2",children:l<100?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(D.A,{className:"w-4 h-4 text-yellow-600 animate-spin"}),(0,s.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:[Math.round(l),"%"]})]}):(0,s.jsx)("span",{className:"text-sm font-semibold text-green-600",children:"Upload Complete"})}),l<100&&(0,s.jsx)("span",{className:"text-xs text-gray-500",children:"Please wait..."})]})]})}function z(e){let{workerId:t,projectId:a,workerName:r,onComplete:d,onCancel:m}=e,{state:f,setState:p,currentFile:b,setFile:j,setWorkerInfo:N}=x(),{uploadFile:w,uploading:v,progress:k,error:D}=function(){let[e,t]=(0,l.useState)(!1),[a,s]=(0,l.useState)(0),[r,i]=(0,l.useState)(null),n=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!e.type.startsWith("image/"))return e;try{let a=await (0,h.A)(e,{maxSizeMB:t,maxWidthOrHeight:1920,useWebWorker:!0,fileType:"image/jpeg"}),s=e.name.replace(/\.[^/.]+$/,".jpg");return new File([a],s,{type:"image/jpeg",lastModified:Date.now()})}catch(t){return console.warn("Image compression failed, using original:",t),e}};return{uploadFile:(0,l.useCallback)(async function(e,a,l){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{onProgress:c,onSuccess:o,onError:d,compressImages:m=!0,maxSizeMB:x=1}=r;t(!0),s(0),i(null);try{let r=e;m&&(s(5),r=await n(e,x),s(20));let i=Date.now(),d=r.name.replace(/[^a-zA-Z0-9.-]/g,"_"),h="".concat(l,"/").concat(i,"-").concat(d),{uploadUrl:g,fileUrl:f}=await u.G.getPresignedUrl({bucket:a,key:h,contentType:r.type});return s(30),await u.G.uploadToS3(g,r,e=>{let t=30+70*e/100;s(t),null==c||c(t)}),s(100),t(!1),null==o||o(f),{fileUrl:f,key:h}}catch(a){let e=a instanceof Error?a:Error("Upload failed");throw i(e),t(!1),null==d||d(e),e}},[]),uploading:e,progress:a,error:r,reset:(0,l.useCallback)(()=>{t(!1),s(0),i(null)},[])}}();(0,l.useEffect)(()=>{N(t,a),p({type:"source-selection"})},[t,a,N,p]);let z=(0,l.useCallback)(e=>{"camera"===e?p({type:"camera"}):p({type:"file-selection"})},[p]),U=(0,l.useCallback)(async e=>{j(e),p({type:"uploading",progress:0,fileName:e.name});try{let s="".concat(a,"/").concat(t),l=await w(e.file,"hazardhawk-certifications",s,{onProgress:t=>{p({type:"uploading",progress:t,fileName:e.name})}});p({type:"processing"});let r=await u.G.extractOCR({documentUrl:l.fileUrl});p({type:"ocr-review",data:{holderName:r.holderName,certificationType:r.certificationType,certificationNumber:r.certificationNumber,expirationDate:r.expirationDate,issueDate:r.issueDate,confidence:r.confidence,documentUrl:l.fileUrl}})}catch(e){console.error("Upload or OCR failed:",e),p({type:"error",message:e instanceof Error?e.message:"Upload failed",canRetry:!0})}},[p,j,w,a,t]),A=(0,l.useCallback)(async()=>{if("ocr-review"===f.type){p({type:"submitting"});try{let e=await u.G.submitCertification({workerId:t,holderName:f.data.holderName,certificationType:f.data.certificationType,certificationNumber:f.data.certificationNumber,expirationDate:f.data.expirationDate,issueDate:f.data.issueDate,documentUrl:f.data.documentUrl,ocrConfidence:f.data.confidence,submittedVia:"web"});p({type:"success",certificationId:e.id}),null==d||d(e.id)}catch(e){console.error("Submission failed:",e),p({type:"error",message:"Failed to submit certification. Please try again.",canRetry:!1})}}},[f,p,t,d]),F=(0,l.useCallback)(()=>{"ocr-review"===f.type?p({type:"manual-entry",prefill:{workerId:t,holderName:f.data.holderName,certificationType:f.data.certificationType,certificationNumber:f.data.certificationNumber,expirationDate:f.data.expirationDate,issueDate:f.data.issueDate}}):p({type:"manual-entry"})},[f,p,t]),S=(0,l.useCallback)(()=>{p({type:"source-selection"})},[p]),$=(0,l.useCallback)(()=>{null==m||m()},[m]);switch(f.type){case"idle":default:return null;case"source-selection":return(0,s.jsxs)("div",{className:"flex flex-col h-full bg-white",children:[(0,s.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center p-6",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2 text-center",children:"Upload Certification"}),r&&(0,s.jsxs)("p",{className:"text-lg text-gray-600 mb-8 text-center",children:["For: ",r]}),(0,s.jsx)("p",{className:"text-base text-gray-700 mb-8 text-center max-w-md",children:"Choose how you'd like to upload your certification document"}),(0,s.jsxs)("div",{className:"w-full max-w-md space-y-4",children:[(0,s.jsxs)(g.$,{onClick:()=>z("camera"),size:"lg",className:"w-full h-20 text-lg bg-yellow-500 hover:bg-yellow-600 text-black font-semibold",children:[(0,s.jsx)(i.A,{className:"w-6 h-6 mr-3"}),"Take Photo"]}),(0,s.jsxs)(g.$,{onClick:()=>z("file"),size:"lg",variant:"outline",className:"w-full h-20 text-lg border-2",children:[(0,s.jsx)(n.A,{className:"w-6 h-6 mr-3"}),"Upload File"]})]})]}),(0,s.jsx)("div",{className:"p-6 border-t border-gray-200",children:(0,s.jsx)(g.$,{onClick:$,variant:"outline",size:"lg",className:"w-full",children:"Cancel"})})]});case"camera":return(0,s.jsx)(y,{onCapture:U,onCancel:()=>p({type:"source-selection"})});case"file-selection":return(0,s.jsx)(C,{onFileSelect:U,onCancel:()=>p({type:"source-selection"})});case"uploading":return(0,s.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen p-6 bg-gray-50",children:(0,s.jsx)(P,{fileName:f.fileName,fileSize:null==b?void 0:b.size,progress:f.progress,showCancel:!1})});case"processing":return(0,s.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen p-6 bg-gray-50",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"inline-block animate-spin rounded-full h-16 w-16 border-4 border-yellow-500 border-t-transparent mb-6"}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Processing Document"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Extracting information from your certification..."})]})});case"ocr-review":return(0,s.jsxs)("div",{className:"flex flex-col h-full bg-white",children:[(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto p-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Review Information"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-6",children:"Please verify the extracted information is correct"}),(null==b?void 0:b.preview)&&(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsx)("img",{src:b.preview,alt:"Document",className:"w-full max-w-md mx-auto rounded-lg border border-gray-200 shadow-sm"})}),(0,s.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 space-y-4 mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Holder Name"}),(0,s.jsx)("p",{className:"text-lg text-gray-900",children:f.data.holderName})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Certification Type"}),(0,s.jsx)("p",{className:"text-lg text-gray-900",children:f.data.certificationType})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Certification Number"}),(0,s.jsx)("p",{className:"text-lg text-gray-900",children:f.data.certificationNumber})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expiration Date"}),(0,s.jsx)("p",{className:"text-lg text-gray-900",children:new Date(f.data.expirationDate).toLocaleDateString()})]}),f.data.issueDate&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Issue Date"}),(0,s.jsx)("p",{className:"text-lg text-gray-900",children:new Date(f.data.issueDate).toLocaleDateString()})]}),(0,s.jsx)("div",{className:"pt-4 border-t border-gray-200",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Confidence Score"}),(0,s.jsxs)("span",{className:"text-sm font-semibold ".concat(f.data.confidence>=.8?"text-green-600":f.data.confidence>=.6?"text-yellow-600":"text-orange-600"),children:[Math.round(100*f.data.confidence),"%"]})]})})]}),f.data.confidence<.8&&(0,s.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(c.A,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-yellow-900 mb-1",children:"Low Confidence Detection"}),(0,s.jsx)("p",{className:"text-sm text-yellow-800",children:"Some information may not be accurate. Please review carefully or enter manually."})]})]})})]}),(0,s.jsxs)("div",{className:"border-t border-gray-200 p-6 space-y-3",children:[(0,s.jsxs)(g.$,{onClick:A,size:"lg",className:"w-full h-16 text-lg bg-green-600 hover:bg-green-700",children:[(0,s.jsx)(o.A,{className:"w-5 h-5 mr-2"}),"Confirm & Submit"]}),(0,s.jsx)(g.$,{onClick:F,variant:"outline",size:"lg",className:"w-full h-16 text-lg",children:"Edit Information"}),(0,s.jsx)(g.$,{onClick:S,variant:"ghost",className:"w-full",children:"Upload Different Document"})]})]});case"submitting":return(0,s.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen p-6 bg-gray-50",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"inline-block animate-spin rounded-full h-16 w-16 border-4 border-green-600 border-t-transparent mb-6"}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Submitting Certification"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Please wait..."})]})});case"success":return(0,s.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen p-6 bg-gray-50",children:(0,s.jsxs)("div",{className:"text-center max-w-md",children:[(0,s.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-green-100 rounded-full mb-6",children:(0,s.jsx)(o.A,{className:"w-12 h-12 text-green-600"})}),(0,s.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Success!"}),(0,s.jsx)("p",{className:"text-lg text-gray-600 mb-8",children:"Your certification has been submitted and is pending verification."}),(0,s.jsx)(g.$,{onClick:$,size:"lg",className:"w-full",children:"Done"})]})});case"error":return(0,s.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen p-6 bg-gray-50",children:(0,s.jsxs)("div",{className:"text-center max-w-md",children:[(0,s.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-red-100 rounded-full mb-6",children:(0,s.jsx)(c.A,{className:"w-12 h-12 text-red-600"})}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Upload Failed"}),(0,s.jsx)("p",{className:"text-gray-600 mb-8",children:f.message}),(0,s.jsxs)("div",{className:"space-y-3",children:[f.canRetry&&(0,s.jsx)(g.$,{onClick:S,size:"lg",className:"w-full",children:"Try Again"}),(0,s.jsx)(g.$,{onClick:$,variant:"outline",size:"lg",className:"w-full",children:"Cancel"})]})]})});case"manual-entry":return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen p-6",children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Manual entry component not yet implemented"}),(0,s.jsx)(g.$,{onClick:$,className:"mt-4",children:"Cancel"})]})}}function U(){let e=(0,r.useSearchParams)(),t=(0,r.useRouter)(),[a,i]=(0,l.useState)(!1),n=e.get("workerId"),o=e.get("projectId"),d=e.get("companyId"),m=e.get("sessionId"),x=e.get("workerName");return((0,l.useEffect)(()=>{i(!0)},[]),a)?n&&o&&d&&m?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,s.jsx)(z,{workerId:n,projectId:o,workerName:x||void 0,onComplete:e=>{console.log("Upload complete:",e),t.push("/upload/".concat(m,"?success=true&certId=").concat(e))},onCancel:()=>{t.push("/upload/".concat(m))}})}):(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4",children:(0,s.jsx)("div",{className:"max-w-md w-full bg-white rounded-xl shadow-lg p-8",children:(0,s.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-6",children:(0,s.jsx)(c.A,{className:"w-10 h-10 text-red-600"})}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-3",children:"Invalid Upload Link"}),(0,s.jsx)("p",{className:"text-gray-600 mb-6",children:"The upload link is missing required information. Please scan the QR code again."}),(0,s.jsx)(g.$,{onClick:()=>t.push("/upload/".concat(m||"start")),size:"lg",className:"w-full",children:"Scan QR Code"})]})})}):(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-gray-300 border-t-blue-600"})})}function A(){return(0,s.jsx)(l.Suspense,{fallback:(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-gray-300 border-t-blue-600"})}),children:(0,s.jsx)(U,{})})}},4897:(e,t,a)=>{"use strict";a.d(t,{$:()=>n});var s=a(5155),l=a(2115),r=a(2821),i=a(5889);let n=l.forwardRef((e,t)=>{let{className:a,variant:l="default",size:n="default",...c}=e;return(0,s.jsx)("button",{className:function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,i.QP)((0,r.$)(t))}("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{"bg-blue-600 text-white hover:bg-blue-700":"default"===l,"border border-gray-300 bg-white text-gray-900 hover:bg-gray-100":"outline"===l,"hover:bg-gray-100 text-gray-900":"ghost"===l,"bg-red-600 text-white hover:bg-red-700":"destructive"===l,"h-10 px-4 py-2":"default"===n,"h-9 px-3 text-xs":"sm"===n,"h-12 px-8":"lg"===n,"h-10 w-10":"icon"===n},a),ref:t,...c})});n.displayName="Button"},9015:(e,t,a)=>{"use strict";a.d(t,{G:()=>l});let s=a(5125).A.create({baseURL:"http://localhost:8080",timeout:3e4,headers:{"Content-Type":"application/json"}});s.interceptors.request.use(e=>{let t=sessionStorage.getItem("authToken");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),s.interceptors.response.use(e=>e,e=>{var t;return(null==(t=e.response)?void 0:t.status)===401&&(window.location.href="/login"),Promise.reject(e)});let l={getPresignedUrl:async e=>(await s.post("/api/storage/presigned-url",e)).data,uploadToS3:async(e,t,a)=>{await s.put(e,t,{headers:{"Content-Type":t.type},onUploadProgress:e=>{a&&e.total&&a(Math.round(100*e.loaded/e.total))}})},extractOCR:async e=>(await s.post("/api/ocr/extract-certification",e)).data,submitCertification:async e=>(await s.post("/api/certifications",e)).data,getPendingQueue:async e=>(await s.get("/api/certifications/pending",{params:e})).data,approve:async e=>{let{certificationId:t,...a}=e;return(await s.post("/api/certifications/".concat(t,"/approve"),a)).data},reject:async e=>{let{certificationId:t,...a}=e;return(await s.post("/api/certifications/".concat(t,"/reject"),a)).data},getCertification:async e=>(await s.get("/api/certifications/".concat(e))).data}}},e=>{e.O(0,[612,854,441,255,358],()=>e(e.s=3640)),_N_E=e.O()}]);